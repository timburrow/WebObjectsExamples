<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="pt-br" xml:lang="pt-br">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="concept" name="DC.Type" />
<meta name="DC.Title" content="Intera????o com o sistema de depend??ncias" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj39374.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj81859.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj95081.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj80721.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqljrenamestatements.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj35312.html" />
<meta scheme="URI" name="DC.Relation" content="rrefcallprocedure.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13590.html" />
<meta scheme="URI" name="DC.Relation" content="rrefdeclaretemptable.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35981.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj31783.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21583.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj32654.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj14854.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35034.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40774.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj29840.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj18922.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40506.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13658.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21571.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj57522.html" />
<meta scheme="URI" name="DC.Relation" content="rrefscalarsubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefselectexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj41360.html" />
<meta scheme="URI" name="DC.Relation" content="rreftableexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rreftablesubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj26498.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj11277.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj33602.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj15309.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="crefsqlj22771" name="DC.Identifier" />
<meta content="pt-br" name="DC.Language" />
<link href="/export/home/rh161140/derby/docs/10.2/out/pt_BR/reftemp/commonltr.css" type="text/css" rel="stylesheet" />
<title>Intera????o com o sistema de depend??ncias</title>
</head>
<body id="crefsqlj22771"><a name="crefsqlj22771"><!-- --></a>


<h1 class="topictitle1">Intera????o com o sistema de depend??ncias</h1>

<div>
<p>


O <span>Derby</span>
acompanha internamente as depend??ncias das instru????es preparadas, que s??o
instru????es SQL pr??-compiladas antes de serem executadas.
S??o tipicamente preparadas (pr??-compiladas) uma vez, e executadas v??rias vezes.</p>

<p>As instru????es preparadas dependem de objetos do dicion??rio, e de instru????es
referenciadas pelas mesmas (Os objetos do dicion??rio incluem tabelas, colunas,
restri????es, ??ndices, vis??es e gatilhos).
A remo????o ou modifica????o de objetos do dicion??rio ou de instru????es que
a instru????o preparada depende a invalida internamente, significando que o
<span>Derby</span>
vai tentar recompilar automaticamente a instru????o quando esta for executada.
Se a recompila????o da instru????o n??o for bem-sucedida, o pedido de execu????o
falhar??.
Entretanto, se for tomada alguma a????o para restaurar a depend??ncia quebrada
(como a restaura????o da tabela que falta), a instru????o preparada poder?? ser
executada, porque o
<span>Derby</span>
ir?? recompil??-la automaticamente no pr??ximo pedido de execu????o.</p>

<p>As instru????es dependem umas das outras; uma instru????o UPDATE WHERE CURRENT
depende da instru????o referenciada.
Remover a instru????o da qual esta depende, invalida a instru????o
UPDATE WHERE CURRENT.</p>

<p>Al??m disso, as instru????es preparadas n??o permitem a execu????o de certas
instru????es de DDL quando existem conjuntos de resultados abertos para as mesmas.</p>

<p>As p??ginas do manual de cada instru????o detalham quais a????es invalidam
a instru????o, caso esteja preparada.</p>

<div class="p">Abaixo segue um exemplo utilizando a ferramenta ij do
<span>Derby</span>:
<pre>ij&gt; <strong>CREATE TABLE MINHA_TABELA (MINHA_COLUNA INT);</strong>
0 rows inserted/updated/deleted
ij&gt; <strong>INSERT INTO MINHA_TABELA VALUES (1), (2), (3);</strong>
3 rows inserted/updated/deleted
-- este exemplo utiliza o comando prepare do ij,
-- que prepara a instru????o
ij&gt; <strong>prepare p1 AS 'INSERT INTO MINHA_TABELA VALUES (4)';</strong>
-- p1 depende de MINHA_TABELA;
ij&gt; <strong>execute p1;</strong>
1 row inserted/updated/deleted
-- O <span>Derby</span>  executa sem recompilar
ij&gt; <strong>CREATE INDEX I1 ON MINHA_TABELA(MINHA_COLUNA);</strong>
0 rows inserted/updated/deleted
-- p1 est?? temporariamente inv??lido por causa do novo ??ndice
ij&gt; <strong>execute p1;</strong>
1 row inserted/updated/deleted
-- O <span>Derby</span> recompila automaticamente e executa p1
ij&gt; <strong>DROP TABLE MINHA_TABELA;</strong>
0 rows inserted/updated/deleted
-- O <span>Derby</span>  permite remover a tabela
-- porque o conjunto de resultados de p1 est?? fechado,
-- entretanto a instru????o p1 est?? temporariamente inv??lida
ij&gt; <strong>CREATE TABLE MINHA_TABELA (MINHA_COLUNA INT);</strong>
0 rows inserted/updated/deleted
ij&gt; <strong>INSERT INTO MINHA_TABELA VALUES (1), (2), (3);</strong>
3 rows inserted/updated/deleted
ij&gt; <strong>execute p1;</strong>
1 row inserted/updated/deleted
-- Como p1 est?? inv??lida, o <span>Derby</span> tenta recompilar
-- antes de executar.
-- ?? bem-sucedido e executa.
ij&gt; <strong>DROP TABLE MINHA_TABELA;</strong>
0 rows inserted/updated/deleted
-- a instru????o p1 agora est?? inv??lida,
-- e desta vez a tentativa de recompilar
-- na hora de executar vai falhar
ij&gt; <strong>execute p1;</strong>
ERROR 42X05: Table/View 'MINHA_TABELA' does not exist.</pre>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>T??pico pai:</strong> <a href="crefsqlj39374.html" title="">Instru????es</a></div>
</div>
<div class="relconcepts"><strong>Conceitos relacionados</strong><br />
<div><a href="crefsqlj95081.html" title="">Instru????es CREATE</a></div>
<div><a href="crefsqlj80721.html" title="">Instru????es DROP</a></div>
<div><a href="crefsqljrenamestatements.html" title="">Instru????es RENAME</a></div>
<div><a href="crefsqlj35312.html" title="">Instru????es SET</a></div>
</div>
<div class="relref"><strong>Refer??ncias relacionadas</strong><br />
<div><a href="rrefsqlj81859.html" title="">Instru????o ALTER TABLE</a></div>
<div><a href="rrefcallprocedure.html" title="">CALL (PROCEDIMENTO)</a></div>
<div><a href="rrefsqlj13590.html" title="">Cl??usula CONSTRAINT</a></div>
<div><a href="rrefdeclaretemptable.html" title="">Instru????o DECLARE GLOBAL TEMPORARY TABLE</a></div>
<div><a href="rrefsqlj35981.html" title="">Instru????o DELETE</a></div>
<div><a href="rrefsqlj31783.html" title="">Cl??usula FOR UPDATE</a></div>
<div><a href="rrefsqlj21583.html" title="">Cl??usula FROM</a></div>
<div><a href="rrefsqlj32654.html" title="">Cl??usula GROUP BY</a></div>
<div><a href="rrefsqlj14854.html" title="">Cl??usula HAVING</a></div>
<div><a href="rrefsqlj35034.html" title="">INNER JOIN</a></div>
<div><a href="rrefsqlj40774.html" title="">Instru????o INSERT</a></div>
<div><a href="rrefsqlj29840.html" title="">Opera????o JOIN</a></div>
<div><a href="rrefsqlj18922.html" title="">LEFT OUTER JOIN</a></div>
<div><a href="rrefsqlj40506.html" title="">Instru????o LOCK TABLE</a></div>
<div><a href="rrefsqlj13658.html" title="">Cl??usula ORDER BY</a></div>
<div><a href="rrefsqlj21571.html" title="">Consulta</a></div>
<div><a href="rrefsqlj57522.html" title="">RIGHT OUTER JOIN</a></div>
<div><a href="rrefscalarsubquery.html" title="">SubconsultaEscalar</a></div>
<div><a href="rrefselectexpression.html" title="">Express??oSele????o</a></div>
<div><a href="rrefsqlj41360.html" title="">Instru????o SELECT</a></div>
<div><a href="rreftableexpression.html" title="">Express??oTabela</a></div>
<div><a href="rreftablesubquery.html" title="">SubconsultaTabela</a></div>
<div><a href="rrefsqlj26498.html" title="">Instru????o UPDATE</a></div>
<div><a href="rrefsqlj11277.html" title="">VALUES Express??o</a></div>
<div><a href="rrefsqlj33602.html" title="">Cl??usula WHERE</a></div>
<div><a href="rrefsqlj15309.html" title="">Cl??usula WHERE CURRENT OF</a></div>
</div>
</div>

</body>
</html>