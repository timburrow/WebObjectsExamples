<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="pt-br" xml:lang="pt-br">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="reference" name="DC.Type" />
<meta name="DC.Title" content="Consulta" />
<meta content="UNION, UNION ALL" name="DC.subject" />
<meta content="UNION, UNION ALL" name="keywords" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj39374.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj22771.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj81859.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj95081.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj80721.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqljrenamestatements.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj35312.html" />
<meta scheme="URI" name="DC.Relation" content="rrefcallprocedure.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13590.html" />
<meta scheme="URI" name="DC.Relation" content="rrefdeclaretemptable.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35981.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj31783.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21583.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj32654.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj14854.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35034.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40774.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj29840.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj18922.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40506.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13658.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj57522.html" />
<meta scheme="URI" name="DC.Relation" content="rrefscalarsubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefselectexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj41360.html" />
<meta scheme="URI" name="DC.Relation" content="rreftableexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rreftablesubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj26498.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj11277.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj33602.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj15309.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="rrefsqlj21571" name="DC.Identifier" />
<meta content="pt-br" name="DC.Language" />
<link href="/export/home/rh161140/derby/docs/10.2/out/pt_BR/reftemp/commonltr.css" type="text/css" rel="stylesheet" />
<title>Consulta</title>
</head>
<body id="rrefsqlj21571"><a name="rrefsqlj21571"><!-- --></a>


<h1 class="topictitle1">Consulta</h1>


<div>
<div class="section">
<p>A consulta cria uma tabela virtual baseada em tabelas existentes ou
constantes transformadas em tabelas.</p>

</div>

<div class="section"><h4 class="sectiontitle">Sintaxe</h4>

<pre><strong>{
    ( <em>Consulta</em> ) |
<em>    Consulta</em> INTERSECT [ ALL | DISTINCT ] <em>Consulta</em> |
<em>    Consulta</em> EXCEPT [ ALL | DISTINCT ] <em>Consulta</em> |
<em>    Consulta</em> UNION [ ALL | DISTINCT ] <em>Consulta</em> |
<em>    <a href="rrefselectexpression.html#rrefselectexpression">Express??oSele????o</a></em> | <em><a href="rrefsqlj11277.html#rrefsqlj11277">VALUES Express??o</a></em>
}</strong>
</pre>

<p>Pode-se colocar par??nteses arbitrariamente em torno das consultas, ou
utilizar par??nteses para controlar a ordem de avalia????o das opera????es
INTERSECT, EXCEPT e UNION.
Estas opera????es s??o avaliadas da esquerda para a direita quando n??o existem
par??nteses presentes, com exce????o das opera????es INTERSECT, que s??o avaliadas
antes das opera????es de UNION e EXCEPT.</p>

</div>

<div class="section"><h4 class="sectiontitle">Linhas duplicadas nos resultados de UNION, INTERSECT e EXCEPT ALL</h4>

<p>As palavras chave ALL e DISTINCT determinam se as linhas duplicadas s??o
eliminadas do resultado da opera????o.
Se for especificada a palavra chave DISTINCT, ent??o o resultado n??o ter?? linhas
duplicadas.
Se for especificada a palavra chave ALL, ent??o poder??o existir linhas duplicadas
no resultado, dependendo da exist??ncia de linhas duplicadas na entrada.
DISTINCT ?? o padr??o, portanto se n??o for especificado nem ALL nem DISTINCT
as linhas duplicadas ser??o eliminadas.
Por exemplo, UNION constr??i um <em>ResultSet</em> intermedi??rio com todas as
linhas das duas consultas, e elimina as linhas duplicadas antes de retornar as
linhas remanescentes.
UNION ALL retorna todas as linhas das duas consultas como resultado.</p>

<div class="p">Dependendo da opera????o especificada, se o n??mero de c??pias de uma
determinada linha na tabela ?? esquerda for L, e o n??mero de c??pias desta linha
na tabela ?? direita for R, ent??o o n??mero de linhas duplicadas desta
determinada linha contidas na tabela de sa??da ser?? (assumindo que a palavra
chave ALL foi especificada):
<ul>
<li>UNION: ( L + R ).</li>

<li>EXCEPT: o maior entre ( L ??? R ) e 0 (zero).</li>

<li>INTERSECT: o menor entre L e R.</li>

</ul>

</div>

</div>

<div class="example"><h4 class="sectiontitle">Exemplos</h4>

<pre><strong><span>-- Uma express??o de sele????o</span>
SELECT *
FROM ORG;

<span>-- uma subconsulta</span>
SELECT *
FROM (SELECT COD_CLASSE FROM CLASSE_AGENDA) AS CS;

<span>-- uma subconsulta</span>
SELECT *
FROM (SELECT COD_CLASSE FROM CLASSE_AGENDA) AS CS (COD_CLASSE);

<span>-- uma uni??o
-- retornar todas as linhas das colunas NUM_DEP e GERENTE
-- da tabela ORG
-- e (1,2) e (3,4)
-- NUM_DEP e GERENTE s??o colunas do tipo SMALLINT.</span>
SELECT NUM_DEP, GERENTE
FROM ORG
UNION ALL
VALUES (1,2), (3,4);

<span>-- uma express??o de valores</span>
VALUES (1,2,3);

<span>-- Listar os n??meros dos empregados (NUM_EMP)
-- de todos os empregados na tabela EMPREGADOS
-- cujo n??mero do departamento (DEP_TRAB) come??a por 'E', ou
-- quem est?? alocado a projetos na tabela ATIV_EMP
-- cujo n??mero do projetor (NUM_PROJ) ?? igual a
-- 'MA2100', 'MA2110' ou 'MA2112'.</span>
SELECT NUM_EMP
FROM EMPREGADOS
WHERE DEP_TRAB LIKE 'E%'
UNION
SELECT NUM_EMP
FROM ATIV_EMP
WHERE NUM_PROJ IN('MA2100', 'MA2110', 'MA2112');

<span>-- Realizar a mesma consulta do exemplo anterior
-- e "marcar" as linhas da tabela EMPREGADOS com 'emp' e
-- as linhas da tabela ATIV_EMP com 'ativ_emp'.
-- Diferentemente do resultado do exemplo anterior,
-- esta consulta pode retornar o mesmo NUM_EMP mais de uma vez,
-- identificando de que tabela veio pela "marca" associada.</span>
SELECT NUM_EMP, 'emp'
FROM EMPREGADOS
WHERE DEP_TRAB LIKE 'E%'
UNION
SELECT NUM_EMP, 'ativ_emp'
FROM ATIV_EMP
WHERE NUM_PROJ IN('MA2100', 'MA2110', 'MA2112');

<span>-- Realizar a mesma consulta do exemplo anterior,
-- por??m utilizando UNION ALL para que as linhas
-- duplicadas n??o sejam eliminadas.</span>
SELECT NUM_EMP
FROM EMPREGADOS
WHERE DEP_TRAB LIKE 'E%'
UNION ALL
SELECT NUM_EMP
FROM ATIV_EMP
WHERE NUM_PROJ IN('MA2100', 'MA2110', 'MA2112');

<span>-- Realizar a mesma consulta do exemplo anterior,
-- incluindo dois empregados adicionais que no
-- momento n??o se encontram em nenhuma tabela,
-- e marcar estas linhas como "nova".</span>
SELECT NUM_EMP, 'emp'
FROM EMPREGADOS
WHERE DEP_TRAB LIKE 'E%'
UNION
SELECT NUM_EMP, 'ativ_emp'
FROM ATIV_EMP
WHERE NUM_PROJ IN('MA2100', 'MA2110', 'MA2112')
UNION
VALUES ('NEWAAA', 'nova'), ('NEWBBB', 'nova');</strong>
</pre>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>T??pico pai:</strong> <a href="crefsqlj39374.html" title="">Instru????es</a></div>
</div>
<div class="relconcepts"><strong>Conceitos relacionados</strong><br />
<div><a href="crefsqlj22771.html" title="">Intera????o com o sistema de depend??ncias</a></div>
<div><a href="crefsqlj95081.html" title="">Instru????es CREATE</a></div>
<div><a href="crefsqlj80721.html" title="">Instru????es DROP</a></div>
<div><a href="crefsqljrenamestatements.html" title="">Instru????es RENAME</a></div>
<div><a href="crefsqlj35312.html" title="">Instru????es SET</a></div>
</div>
<div class="relref"><strong>Refer??ncias relacionadas</strong><br />
<div><a href="rrefsqlj81859.html" title="">Instru????o ALTER TABLE</a></div>
<div><a href="rrefcallprocedure.html" title="">CALL (PROCEDIMENTO)</a></div>
<div><a href="rrefsqlj13590.html" title="">Cl??usula CONSTRAINT</a></div>
<div><a href="rrefdeclaretemptable.html" title="">Instru????o DECLARE GLOBAL TEMPORARY TABLE</a></div>
<div><a href="rrefsqlj35981.html" title="">Instru????o DELETE</a></div>
<div><a href="rrefsqlj31783.html" title="">Cl??usula FOR UPDATE</a></div>
<div><a href="rrefsqlj21583.html" title="">Cl??usula FROM</a></div>
<div><a href="rrefsqlj32654.html" title="">Cl??usula GROUP BY</a></div>
<div><a href="rrefsqlj14854.html" title="">Cl??usula HAVING</a></div>
<div><a href="rrefsqlj35034.html" title="">INNER JOIN</a></div>
<div><a href="rrefsqlj40774.html" title="">Instru????o INSERT</a></div>
<div><a href="rrefsqlj29840.html" title="">Opera????o JOIN</a></div>
<div><a href="rrefsqlj18922.html" title="">LEFT OUTER JOIN</a></div>
<div><a href="rrefsqlj40506.html" title="">Instru????o LOCK TABLE</a></div>
<div><a href="rrefsqlj13658.html" title="">Cl??usula ORDER BY</a></div>
<div><a href="rrefsqlj57522.html" title="">RIGHT OUTER JOIN</a></div>
<div><a href="rrefscalarsubquery.html" title="">SubconsultaEscalar</a></div>
<div><a href="rrefselectexpression.html" title="">Express??oSele????o</a></div>
<div><a href="rrefsqlj41360.html" title="">Instru????o SELECT</a></div>
<div><a href="rreftableexpression.html" title="">Express??oTabela</a></div>
<div><a href="rreftablesubquery.html" title="">SubconsultaTabela</a></div>
<div><a href="rrefsqlj26498.html" title="">Instru????o UPDATE</a></div>
<div><a href="rrefsqlj11277.html" title="">VALUES Express??o</a></div>
<div><a href="rrefsqlj33602.html" title="">Cl??usula WHERE</a></div>
<div><a href="rrefsqlj15309.html" title="">Cl??usula WHERE CURRENT OF</a></div>
</div>
</div>

</body>
</html>