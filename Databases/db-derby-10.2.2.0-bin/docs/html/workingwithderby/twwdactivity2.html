<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="task" name="DC.Type" />
<meta name="DC.Title" content="Activity 2: Run SQL using the Client driver" />
<meta name="abstract" content="This activity uses Derby within a Client-Server configuration by using the Network Server. The ij tool is the client application that connects to the Derby Network Server. A database called seconddb is created and some basic SQL commands are executed." />
<meta name="description" content="This activity uses Derby within a Client-Server configuration by using the Network Server. The ij tool is the client application that connects to the Derby Network Server. A database called seconddb is created and some basic SQL commands are executed." />
<meta content="Network Server, Client driver" name="DC.subject" />
<meta content="Network Server, Client driver" name="keywords" />
<meta scheme="URI" name="DC.Relation" content="twwdactivity1_Setup.html" />
<meta scheme="URI" name="DC.Relation" content="twwdactivity3_Setup.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="twwdactivity2" name="DC.Identifier" />
<meta content="en-us" name="DC.Language" />
<link href="/export/home/rh161140/derby/docs/10.2/out/workingwithderbytemp/commonltr.css" type="text/css" rel="stylesheet" />
<title>Activity 2: Run SQL using the Client driver</title>
</head>
<body id="twwdactivity2"><a name="twwdactivity2"><!-- --></a>


<h1 class="topictitle1">Activity 2: Run SQL using the Client driver</h1>



<div><p>This activity uses Derby within a Client-Server configuration by
using the Network Server. The <samp class="codeph">ij</samp> tool is the client application
that connects to the Derby Network Server. A database called <samp class="codeph">seconddb</samp> is
created and some basic SQL commands are executed.</p>

<div class="p">This activity assumes that you know how to open a command shell, change
directory (<kbd class="userinput">cd</kbd>) to the <samp class="codeph">DERBYDBS</samp> directory
and set the <var class="varname">DERBY_HOME</var> environment variable.</div>

<div class="section">Two command windows (labelled <samp class="codeph">Shell-1</samp> and <samp class="codeph">Shell-2</samp>)
are used in this activity. <samp class="codeph">Shell-1</samp> is used to start the Derby
Network Server and display Network Server messages. <samp class="codeph">Shell-2</samp> is
used to establish a client connection to the Network Server using <samp class="codeph">ij</samp> and
then perform some basic SQL operations.</div>

<ol>
<li class="stepexpand"><span>Open a command window that we'll call <samp class="codeph">Shell-1</samp>.
Change directory (<kbd class="userinput">cd</kbd>) to the <samp class="codeph">DERBYDBS</samp> directory
and set the <var class="varname">DERBY_HOME</var> environment variable.</span></li>

<li class="stepexpand"><span>Start the Network Server.</span> <dl>
<dt class="dlterm">On Windows platforms:</dt>

<dd><hr /><pre><strong>java -jar %DERBY_HOME%\lib\derbynet.jar start</strong>

<em>Apache Derby Network Server - 10.2.1.6 - (452058) started and 
 ready to accept connections on port 1527 at 2006-09-22 
 00:08:30.049 GMT</em></pre><hr />
</dd>

</dl>
<dl>
<dt class="dlterm">On UNIX Korn Shell platforms:</dt>

<dd><hr /><pre><strong>java -jar $DERBY_HOME/lib/derbynet.jar start</strong>

<em>Apache Derby Network Server - 10.2.1.6 - (452058) started and 
 ready to accept connections on port 1527 at 2006-09-22 
 00:08:30.049 GMT</em></pre><hr />
</dd>

<dd class="ddexpand" />

</dl>
 A Network Server startup message is displayed
in the <samp class="codeph">Shell-1</samp> command window.</li>

<li class="stepexpand"><span>Open another command window that we'll call <samp class="codeph">Shell-2</samp>.
Change directory (<kbd class="userinput">cd</kbd>) to the <samp class="codeph">DERBYDBS</samp> directory
and set the <var class="varname">DERBY_HOME</var> environment variable.</span></li>

<li class="stepexpand"><span>Start <samp class="codeph">ij</samp>.</span> <dl>
<dt class="dlterm">On Windows platforms:</dt>

<dd><hr /><pre><strong>java -jar %DERBY_HOME%\lib\derbyrun.jar ij</strong>

<em>ij version <span>10.2</span></em>
</pre><hr />
</dd>

</dl>
<dl>
<dt class="dlterm">On UNIX Korn Shell platforms:</dt>

<dd><hr /><pre><strong>java -jar $DERBY_HOME/lib/derbyrun.jar ij</strong>

<em>ij version <span>10.2</span></em></pre><hr />
</dd>

</dl>
 All subsequent commands are entered from
the network client, and are therefore entered in the <samp class="codeph">Shell-2</samp> command
window.</li>

<li class="stepexpand"><span>Create and open a connection to the database using the client driver.</span>
 <hr /><pre><strong>CONNECT 'jdbc:derby://localhost:1527/seconddb;create=true';
</strong></pre><hr />
<div class="remember"><span class="remembertitle">Remember: </span>A client connection URL contains a hostname
and a port number: <samp class="codeph">//localhost:1527/</samp>.</div>
</li>

<li class="stepexpand"><span>Create a table with two columns (<samp class="codeph">ID</samp> and <samp class="codeph">NAME</samp>)
using SQL.</span> <hr /><pre><strong>CREATE TABLE SECONDTABLE
    (ID INT PRIMARY KEY,
    NAME VARCHAR(14));</strong>

<em>0 rows inserted/updated/deleted</em>
</pre><hr />
</li>

<li class="stepexpand"><span>Insert three records into the table.</span> <hr /><pre><strong>INSERT INTO SECONDTABLE VALUES 
    (100,'ONE HUNDRED'),(200,'TWO HUNDRED'),(300,'THREE HUNDRED');</strong>

<em>3 rows inserted/updated/deleted</em>
</pre><hr />
</li>

<li class="stepexpand"><span>Select all of the records in the table.</span> <hr /><pre><strong>SELECT * FROM SECONDTABLE;</strong>

<em>    ID         |NAME
    ------------------------
    100        |ONE HUNDRED
    200        |TWO HUNDRED
    300        |THREE HUNDRED

3 rows selected</em></pre><hr />
</li>

<li class="stepexpand"><span>Select a subset of records from the table by qualifying the command.</span>
 <hr /><pre>ij&gt; <strong>SELECT * FROM SECONDTABLE WHERE ID=200;</strong>

<em>    ID         |NAME
    ------------------------
    200        |TWO HUNDRED

1 row selected</em> </pre><hr />
</li>

<li class="stepexpand"><span>Exit <samp class="codeph">ij</samp>.</span> <hr /><pre><strong>exit;</strong></pre><hr />

</li>

<li class="stepexpand"><span>Shut down the Derby Network Server.</span> <dl>
<dt class="dlterm">On Windows platforms:</dt>

<dd><hr /><pre><strong>java -jar %DERBY_HOME%\lib\derbynet.jar shutdown</strong>

<em>Apache Derby Network Server - 10.2.1.6 - (452058) shutdown 
 at 2006-09-22 00:16:44.223 GMT</em>
</pre><hr />
</dd>

</dl>
<dl>
<dt class="dlterm">On UNIX Korn Shell platforms:</dt>

<dd><hr /><pre><strong>java -jar $DERBY_HOME/lib/derbynet.jar shutdown</strong>

<em>Apache Derby Network Server - 10.2.1.6 - (452058) shutdown 
 at 2006-09-22 00:16:44.223 GMT</em>
</pre><hr />
</dd>

</dl>
 The server shutdown confirmation appears
in both command windows.</li>

</ol>

<div class="section"><strong>Activity notes</strong><p>The client connection URL contains network
information (a hostname and portnumber) not found in the URL for an embedded
connection. This information tells the client driver the "location" of the
Network Server. The client driver sends requests to and receives responses
from the Network Server.</p>
<p>In this activity the Derby database engine
is embedded in the Network Server and returns data to the <samp class="codeph">ij</samp> client
(a client/server configuration). In contrast, establishing a connection using
an embedded URL (one without <samp class="codeph">//localhost:1527/</samp>) would have
caused the Derby engine to be embedded in the <samp class="codeph">ij</samp> application
(an embedded configuration).</p>
<div class="p">Network Server start up and shutdown messages
are written to the <samp class="codeph">derby.log</samp> log file along with the standard
database engine messages. For example:<hr /><pre><em>Apache Derby Network Server - 10.2.1.6 - (452058) started and ready to 
 accept connections on port 1527 at 2006-09-22 00:08:30.049 GMT</em>
   ...( database engine messages not shown )...
<em>Apache Derby Network Server - 10.2.1.6 - (452058) shutdown 
 at 2006-09-22 00:16:44.223 GMT</em></pre><hr />
</div>
<p>Though not demonstrated here,
multiple client programs can connect to Network Server and access the database
simultaneously in this configuration.</p>
</div>

</div>

<div>
<div class="familylinks">
<div class="previouslink"><strong>Previous topic:</strong> <a href="twwdactivity1_Setup.html" title="In this section the Derby database engine is loaded by the Derby IJ tool. The Derby embedded driver is used to create and connect to the database firstdb. A few basic SQL commands are demonstrated.">Activity 1: Run SQL using the Embedded driver</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a href="twwdactivity3_Setup.html" title="This activity loads the Derby database engine using a simple Java JDBC program. JDBC is the Java Database Connectivity API and is also the native API for Derby. The program uses the embedded driver to create (if needed) and then connect to the jdbcDemoDB database. You can then populate a table within the database with text. The program demonstrates some basic JDBC processing along with related error handling.">Activity 3: Run a JDBC program using the Embedded driver</a></div>
</div>
</div>

</body>
</html>