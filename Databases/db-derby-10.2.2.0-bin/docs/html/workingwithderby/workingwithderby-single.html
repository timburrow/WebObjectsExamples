<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><META http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Working With Derby</title><META content="text/css" http-equiv="Content-Style-Type"><style type="text/css">
        a { color: black; border: none; text-decoration: none; }
        img { border: none; }
      </style></head><body topmargin="6" leftmargin="6" marginheight="6" marginwidth="6" bgcolor="white"><br><div valign="top"><div style="padding: 6pt; border-width: thin; border-color: black; font-family: Helvetica; margin-top: 2pc;"><div style="text-align: right; margin-bottom: 12pc; margin-top: 12pc; line-height: 100%; font-size: 12pt;"><img src="../images/logowithtext.jpg"></div></div><div style="font-family: Helvetica; text-align: left;"><div style="line-height: 140%; font-weight: bold; font-size: 22pt;">Working With Derby</div><div style="font-style: italic; margin-bottom: 1in; line-height: 140%; font-size: 8pt;">
          Version 10.2</div></div><div style="line-height: normal; font-size: 8pt; text-align: right; margin-top: 3pc;">
          Derby Document build: <div>December 11, 2006, 7:06:09 AM (PST)</div></div></div><div><div style="line-height: normal; font-size: 8pt; text-align: right; margin-top: 3pc;">
          &copy;  Copyright&nbsp; 
2006:&nbsp; 
Apache Software Foundation </div></div><br><br><div valign="top"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; text-align: center; color: purple;"></div></div><br><br><div valign="top"><div style="line-height: 8pt; font-size: 8pt;">Copyright</div></div><div valign="top"><a name="page1-1"></a><div style="font-family: Helvetica; font-size: 10pt; line-height: 12pt;"><div style="font-family: Helvetica; text-align: left;"><div> &nbsp;&nbsp;&nbsp; </div><div style="line-height: 140%; font-weight: bold; font-size: 20pt;">
              Contents </div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#rwwdcopyright"><span style="font-weight: bold;">Copyright</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#twwdIntro"><span style="font-weight: bold;">Introduction and prerequisites</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cwwdactivities"><span style="font-weight: bold;">Activity overview</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#twwdactivity1_setup"><span style="font-weight: bold;">Activity 1: Run SQL using the Embedded driver</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#twwdactivity1"><span style="font-weight: bold;">Creating the database and running SQL</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#twwdactivity2"><span style="font-weight: bold;">Activity 2: Run SQL using the Client driver</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#twwdactivity3_Setup"><span style="font-weight: bold;">Activity 3: Run a JDBC program using the Embedded driver</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#rwwdactivity3"><span style="font-weight: bold;">The WwdEmbedded program</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#twwdactivity4"><span style="font-weight: bold;">Activity 4: Create and run a JDBC program using the Client driver and
Network Server</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#cwwdsummary"><span style="font-weight: bold;">What next with Derby</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div></div></div></div><div valign="top"><div style="font-family: Helvetica; font-weight: bold; font-size: 10pt; text-align: center;"><span>&bull;</span></div></div><br><br><div valign="top"><div style="line-height: 8pt; font-size: 8pt;">Copyright</div></div><div valign="top"><div style="font-family: Helvetica; font-size: 10pt; text-align: left;">Apache Software FoundationWorking With DerbyApache Derby<div><a name="N1003F"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="rwwdcopyright"></a><span></span>Copyright</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10048"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><img src="../images/logowithtext.jpg"></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Copyright 2006 The Apache Software Foundation or its licensors,
as applicable.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">http://www.apache.org/licenses/LICENSE-2.0</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Unless
required by applicable law or agreed to in writing, software   distributed
under the License is distributed on an "AS IS" BASIS,   WITHOUT WARRANTIES
OR CONDITIONS OF ANY KIND, either express or implied.   See the License for
the specific language governing permissions and   limitations under the License.</div></div></div></div><div><a name="N10089"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="twwdIntro"></a><span></span>Introduction and prerequisites</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Welcome to Derby!
To help you get up and running with Derby as quickly as possible,
this self-study guide highlights some of the more important features of Derby
through a series of activities designed to demonstrate the use of Derby in
embedded and client-server configurations.
After performing these activities, you will find Derby to be an easy to use and
fully functional RDBMS.
This section provides a brief description of Derby, followed by information on
the skills and software required to perform the activities presented in this
document, and ends with a brief description of what is presented by each of the
Working With Derby activities.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N100BC"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Derby is a full featured, open source relational database engine.
It is written and implemented completely in Java, and provides users with a
small footprint standards-based database engine that can be tightly embedded
into any Java based solution. Derby ensures data integrity and provides sophisticated
transaction support. In its default configuration there is no separate
database server to be installed or maintained by the end user. For more information
on Derby visit the Derby website at: <span style="color: blue;"><a href="http://db.apache.org/derby">http://db.apache.org/derby</a></span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Performing the Working
With Derby activities requires no prior knowledge of Java, JDBC or SQL. Each
Activity Sequence section provides the complete command syntax needed to execute
each operation on a Windows machine or in a UNIX/Linux Korn shell.  This document
demonstrates, but does not teach, the Java, JDBC and SQL presented, so readers
wishing a deeper understanding of these topics will need additional reference
materials.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Performing the Working With Derby activities does require
that Java and Derby software be installed on the computer, and the ability
to enter computer operating system commands. Specifically:<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>A Java development kit version 1.3 or higher</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>The binary (<span style="font-family: Courier;">bin</span>) installation of Apache Derby version
<span style="border-right-width: 0pt; border-left-width: 0pt;">10.2</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>A basic knowledge of the computer command line interface<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>how to start a command shell or window</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>how to navigate the filesystem hierarchy</div></td></tr></table></div></div></td></tr></table></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">If unsure about the Java or Derby environments installed, perform
the following steps before attempting the subsequent activities:</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Verify that the JAVA_HOME environment variable is set and points
to a Java development kit version 1.3 or higher.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Open a command
window and run the command <span style="font-family: Courier;">java -version</span> using the appropriate
syntax for your system:</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">"%JAVA_HOME%\bin\java" -version</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">"$JAVA_HOME/bin/java" -version</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">The output from the command will look
something like this:<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-style: italic;">java version "1.4.2_04"  
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_04-b05)  
Java HotSpot(TM) Client VM (build 1.4.2_04-b05, mixed mode)</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre>
The output you see
may be different from what is shown here, because the <span style="font-family: Courier;">java -version</span> command
outputs vendor-specific information. If the command produced an error or the
version listed is not 1.3 or higher, please install a Java development kit
before continuing.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Verify that the DERBY_HOME environment variable is set and points to
the filesystem path to the root directory of the Derby <span style="border-right-width: 0pt; border-left-width: 0pt;">10.2</span> installation:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Open a command window and run the appropriate command for your system:</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">echo %DERBY_HOME%</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">echo $DERBY_HOME</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">The output from the command will look something like this:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-style: italic;">Windows: C:\derby
Unix/Linux: /opt/derby</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre>
If Derby is not installed or cannot be found, please install a copy now.
The most recent version of Derby can be downloaded from:
<span style="color: blue;"><a href="http://db.apache.org/derby/derby_downloads.html">http://db.apache.org/derby/derby_downloads.html</a></span>.  From the Download page use the link to the 'Latest
Official Release', then locate the <span style="font-family: Courier;">bin</span> distribution (e.g.
db-derby-&lt;version&gt;-bin.zip and db-derby-&lt;version&gt;-bin.tar.gz).
Download the appropriate file for your platform, '-bin.zip' for Windows or
'-bin.tar.gz' for Unix/Linux, and unzip/untar this file. After decompressing
the downloaded file, move the directory created to the filesystem path chosen
to be the root directory of the Derby installation
(e.g. move db-derby-&lt;version&gt;-bin C:\derby).
</div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N101DD"></a><span></span>Anyone having problems with any aspect of these activities can gain
assistance via e-mail by writing to derby-user@db.apache.org.  The questions
and feedback received will be used to make this document even more useful. </div></div><div><a name="N1021E"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cwwdactivities"></a><span></span>Activity overview</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">What you can expect to learn in each activity.</div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;"></span></div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;"></span></div><div style="margin-left: 72pt + 16pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-weight: bold;">Activity 1:</span>  Use the  Derby <span style="font-family: Courier;">ij</span> tool to load
the Derby embedded driver and start the Derby database engine. Create the
database firstdb and the table FIRSTTABLE. Use a few basic SQL commands to
insert and select data. The Derby message log <span style="font-family: Courier;">derby.log</span> and
the database directories and files are introduced.</div></div><div style="margin-left: 72pt + 16pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-weight: bold;">Activity 2:</span> Use Derby within a Client-Server configuration.
Start the Derby Network Server which will embed the Derby engine. In a separate
process use the Derby <span style="font-family: Courier;">ij</span> tool to load the Derby client driver
and connect to the Server. Create a database called <span style="font-family: Courier;">seconddb</span> and
the table SECONDTABLE. Use a few basic SQL commands to insert and select data.</div></div><div style="margin-left: 72pt + 16pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-weight: bold;">Activity 3:</span> Load the Derby database engine from a simple Java
JDBC program. Use the embedded driver to create the database jdbcDemoDB and
the WISH_LIST table. Populate the table with text entered from the keyboard
then view a list of the records in the table. Walk through the code to understand
the basic structure of a JDBC program that accesses a Derby database. The <span style="font-family: Courier;">CLASSPATH</span> variable
and connection URL attribute <span style="font-family: Courier;">;shutdown=true</span> are introduced.</div></div><div style="margin-left: 72pt + 16pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-weight: bold;">Activity 4:</span> Modify the Java JDBC program to load the client
driver and connect to the Derby Network Server. Compile the altered program
and test that it operates as it did in the previous activity.</div></div></div></div></div></div></div><div><a name="N102B6"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="twwdactivity1_setup"></a><span></span>Activity 1: Run SQL using the Embedded driver</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">In this section the Derby database engine is loaded by the Derby
IJ tool. The Derby embedded driver is used to create and connect to the database
firstdb. A few basic SQL commands are demonstrated.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N102DA"></a><span></span>In preparation for performing this activity the environment variable <span style="font-style: italic;">DERBY_HOME</span> needs
to be set and an empty working directory (<span style="font-family: Courier;">DERBYDBS</span>) created.
The <span style="font-style: italic;">DERBY_HOME</span> variable defines the filesystem path to
the root directory of the Derby installation. The <span style="font-family: Courier;">DERBYDBS</span> directory
is where the files created during the activities are stored.<div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">The example
commands defining <span style="font-style: italic;">DERBY_HOME</span> use the fictitious filesystem
paths <span style="font-family: Courier;">C:\derby</span> for Windows examples and <span style="font-family: Courier;">/opt/derby</span> for
UNIX examples. Be sure to adjust these commands so <span style="font-style: italic;">DERBY_HOME</span> indicates
the location of the Derby installation on the system being used. The following
activity sequence shows</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Setting the <span style="font-style: italic;">DERBY_HOME</span> environment variable.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Creating the <span style="font-family: Courier;">DERBYDBS</span> work directory</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Changing the directory (<span style="font-family: Courier;">cd</span>) to the work
directory</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>4. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Copying the SQL scripts that create the tables and data for toursdb
from the Derby <span style="font-family: Courier;">demo\programs\toursdb</span> subdirectory into the <span style="font-family: Courier;">DERBYDBS</span> directory.</span></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1035A"></a><span></span>Open a command window and perform the following activity sequence:<div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 16pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">set DERBY_HOME=C:\derby

md DERBYDBS

cd DERBYDBS

copy %DERBY_HOME%\demo\programs\toursdb\*.sql . </span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 16pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">export DERBY_HOME=/opt/derby

mkdir DERBYDBS

cd DERBYDBS

cp $DERBY_HOME/demo/programs/toursdb/*.sql . </span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">&gt;
        Important: </span>  A command prompt will be displayed after
each command is executed. If an error is displayed please double check the
spelling and reenter the command.</div></div></div><div><a name="N103D7"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="twwdactivity1"></a><span></span>Creating the database and running SQL</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Run the Derby ij tool.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar %DERBY_HOME%\lib\derbyrun.jar ij</span>

<span style="font-style: italic;">ij version <span style="border-right-width: 0pt; border-left-width: 0pt;">10.2</span></span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar $DERBY_HOME/lib/derbyrun.jar ij</span>

<span style="font-style: italic;">ij version <span style="border-right-width: 0pt; border-left-width: 0pt;">10.2</span></span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Create the database and open a connection to it using the embedded
driver.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">CONNECT 'jdbc:derby:firstdb;create=true';</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Create a table with two columns using standard SQL.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">CREATE TABLE FIRSTTABLE
    (ID INT PRIMARY KEY,
    NAME VARCHAR(12));</span>

<span style="font-style: italic;">0 rows inserted/updated/deleted</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>4. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Insert three records.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">INSERT INTO FIRSTTABLE VALUES 
    (10,'TEN'),(20,'TWENTY'),(30,'THIRTY');</span>

<span style="font-style: italic;">3 rows inserted/updated/deleted</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>5. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Perform a simple select of all records in the table.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">SELECT * FROM FIRSTTABLE;</span>

<span style="font-style: italic;">     ID         |NAME
    ------------------------
    10         |TEN
    20         |TWENTY
    30         |THIRTY

3 rows selected</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>6. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Preform a qualified select of the record with column ID=20.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">SELECT * FROM FIRSTTABLE
WHERE ID=20;</span>

<span style="font-style: italic;">    ID         |NAME
    ------------------------
    20         |TWENTY

1 row selected</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>7. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Load the SQL script <span style="font-family: Courier;">ToursDB_schema.sql</span> to
create the tables and other schema objects (this step is optional).</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">run 'ToursDB_schema.sql';</span>

<span style="font-style: italic;">ij&gt; CREATE TABLE AIRLINES
   (  AIRLINE CHAR(2) NOT NULL ,
      AIRLINE_FULL VARCHAR(24),
      BASIC_RATE DOUBLE PRECISION,
   . . .
0 rows inserted/updated/deleted
   . . .

<span style="font-weight: bold;"><span style="font-family: Courier;">===&gt; Other output messages not shown &lt;=====</span></span></span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>a.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Populate the tables with data by running the script <span style="font-family: Courier;">loadTables.sql</span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">run 'loadTables.sql';</span>

<span style="font-style: italic;">ij&gt; run 'loadCOUNTRIES.sql';
ij&gt; insert into COUNTRIES values ( 'Afghanistan','AF','Asia');
1 row inserted/updated/deleted
ij&gt; insert into COUNTRIES values ( 'Albania','AL','Europe');
1 row inserted/updated/deleted
    . . .
<span style="font-weight: bold;"><span style="font-family: Courier;">===&gt; Other output messages not shown &lt;=====</span></span></span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr></table></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>8. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Exit the ij tool.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">exit;</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>9. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Browse the key files created by the activity.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>The <span style="font-weight: bold;"><span style="font-family: Courier;"><span style="font-style: italic;">derby.log</span></span></span> message and
error log file. Under normal circumstances it will contain a set of startup
messages and a shutdown message.<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>----------------------------------------------------------------
2006-09-21 23:33:37.564 GMT:
 Booting Derby version The Apache Software Foundation 
   - Apache Derby - <span style="border-right-width: 0pt; border-left-width: 0pt;">10.2</span>.1.6 - (452058): 
   instance c013800d-0109-7f82-e11f-000000119a68
    on database directory C:\DERBYDBS\FIRSTDB 
Database Class Loader started - derby.database.classpath=''

2006-09-21 23:44:13.178 GMT:
Shutting down instance c013800d-0109-7f82-e11f-000000119a68
----------------------------------------------------------------<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>The <span style="font-weight: bold;"><span style="font-family: Courier;"><span style="font-style: italic;">firstdb</span></span></span>  database directory.
Within the directory are the subdirectories <span style="font-weight: bold;"><span style="font-family: Courier;"><span style="font-style: italic;">seg0</span></span></span> (containing
the data files) and <span style="font-weight: bold;"><span style="font-family: Courier;"><span style="font-style: italic;">log</span></span></span> (containing
the transaction log files).</div></td></tr></table></div></div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N105F5"></a><span></span><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;">Description of connection command:
<span style="font-family: Courier;">connect 'jdbc:derby:firstdb;create=true';</span></div><div style="margin-left: 72pt + 16pt;"><span style="font-family: Courier;">connect</span> - the ij command to establish a connection to
a database</div><div style="margin-left: 72pt + 16pt;">The Derby connection URL enclosed in single quotes:<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">jdbc:derby:</span> - JDBC protocol specification for the Derby
driver.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">firstdb</span> - the name of the database, this can be any string.
Because no filepath is specified the database will be created in the default
working directory (<span style="font-family: Courier;">DERBYDBS</span>).</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">;create=true</span> - The Derby <span style="font-style: italic;">URL attribute</span> used
to create databases. Derby does not have an SQL <span style="font-style: italic;">create database</span> command.</div></td></tr></table></div></div><div style="margin-left: 72pt + 16pt;"><span style="font-family: Courier;"><span style="font-weight: bold;">;</span></span>  (semicolon) - the ij command terminator.</div></div></div></div></div></div></div><div><a name="N1067A"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="twwdactivity2"></a><span></span>Activity 2: Run SQL using the Client driver</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">This activity uses Derby within a Client-Server configuration by
using the Network Server. The <span style="font-family: Courier;">ij</span> tool is the client application
that connects to the Derby Network Server. A database called <span style="font-family: Courier;">seconddb</span> is
created and some basic SQL commands are executed.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N106AA"></a><span></span>This activity assumes that you know how to open a command shell, change
directory (<span style="font-family: Courier;">cd</span>) to the <span style="font-family: Courier;">DERBYDBS</span> directory
and set the <span style="font-style: italic;">DERBY_HOME</span> environment variable.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N106C1"></a><span></span>Two command windows (labelled <span style="font-family: Courier;">Shell-1</span> and <span style="font-family: Courier;">Shell-2</span>)
are used in this activity. <span style="font-family: Courier;">Shell-1</span> is used to start the Derby
Network Server and display Network Server messages. <span style="font-family: Courier;">Shell-2</span> is
used to establish a client connection to the Network Server using <span style="font-family: Courier;">ij</span> and
then perform some basic SQL operations.</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Open a command window that we'll call <span style="font-family: Courier;">Shell-1</span>.
Change directory (<span style="font-family: Courier;">cd</span>) to the <span style="font-family: Courier;">DERBYDBS</span> directory
and set the <span style="font-style: italic;">DERBY_HOME</span> environment variable.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Start the Network Server.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar %DERBY_HOME%\lib\derbynet.jar start</span>

<span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) started and 
 ready to accept connections on port 1527 at 2006-09-22 
 00:08:30.049 GMT</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar $DERBY_HOME/lib/derbynet.jar start</span>

<span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) started and 
 ready to accept connections on port 1527 at 2006-09-22 
 00:08:30.049 GMT</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div><div style="margin-left: 72pt + 32pt;"></div></div></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A Network Server startup message is displayed
in the <span style="font-family: Courier;">Shell-1</span> command window.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Open another command window that we'll call <span style="font-family: Courier;">Shell-2</span>.
Change directory (<span style="font-family: Courier;">cd</span>) to the <span style="font-family: Courier;">DERBYDBS</span> directory
and set the <span style="font-style: italic;">DERBY_HOME</span> environment variable.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>4. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Start <span style="font-family: Courier;">ij</span>.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar %DERBY_HOME%\lib\derbyrun.jar ij</span>

<span style="font-style: italic;">ij version <span style="border-right-width: 0pt; border-left-width: 0pt;">10.2</span></span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar $DERBY_HOME/lib/derbyrun.jar ij</span>

<span style="font-style: italic;">ij version <span style="border-right-width: 0pt; border-left-width: 0pt;">10.2</span></span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">All subsequent commands are entered from
the network client, and are therefore entered in the <span style="font-family: Courier;">Shell-2</span> command
window.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>5. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Create and open a connection to the database using the client driver.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">CONNECT 'jdbc:derby://localhost:1527/seconddb;create=true';
</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Remember: </span>  A client connection URL contains a hostname
and a port number: <span style="font-family: Courier;">//localhost:1527/</span>.</div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>6. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Create a table with two columns (<span style="font-family: Courier;">ID</span> and <span style="font-family: Courier;">NAME</span>)
using SQL.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">CREATE TABLE SECONDTABLE
    (ID INT PRIMARY KEY,
    NAME VARCHAR(14));</span>

<span style="font-style: italic;">0 rows inserted/updated/deleted</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>7. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Insert three records into the table.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">INSERT INTO SECONDTABLE VALUES 
    (100,'ONE HUNDRED'),(200,'TWO HUNDRED'),(300,'THREE HUNDRED');</span>

<span style="font-style: italic;">3 rows inserted/updated/deleted</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>8. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Select all of the records in the table.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">SELECT * FROM SECONDTABLE;</span>

<span style="font-style: italic;">    ID         |NAME
    ------------------------
    100        |ONE HUNDRED
    200        |TWO HUNDRED
    300        |THREE HUNDRED

3 rows selected</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>9. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Select a subset of records from the table by qualifying the command.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>ij&gt; <span style="font-weight: bold;">SELECT * FROM SECONDTABLE WHERE ID=200;</span>

<span style="font-style: italic;">    ID         |NAME
    ------------------------
    200        |TWO HUNDRED

1 row selected</span> <div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>10. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Exit <span style="font-family: Courier;">ij</span>.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">exit;</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>11. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Shut down the Derby Network Server.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar %DERBY_HOME%\lib\derbynet.jar shutdown</span>

<span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) shutdown 
 at 2006-09-22 00:16:44.223 GMT</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar $DERBY_HOME/lib/derbynet.jar shutdown</span>

<span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) shutdown 
 at 2006-09-22 00:16:44.223 GMT</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">The server shutdown confirmation appears
in both command windows.</div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10919"></a><span></span><span style="font-weight: bold;">Activity notes</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">The client connection URL contains network
information (a hostname and portnumber) not found in the URL for an embedded
connection. This information tells the client driver the "location" of the
Network Server. The client driver sends requests to and receives responses
from the Network Server.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">In this activity the Derby database engine
is embedded in the Network Server and returns data to the <span style="font-family: Courier;">ij</span> client
(a client/server configuration). In contrast, establishing a connection using
an embedded URL (one without <span style="font-family: Courier;">//localhost:1527/</span>) would have
caused the Derby engine to be embedded in the <span style="font-family: Courier;">ij</span> application
(an embedded configuration).</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Network Server start up and shutdown messages
are written to the <span style="font-family: Courier;">derby.log</span> log file along with the standard
database engine messages. For example:<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) started and ready to 
 accept connections on port 1527 at 2006-09-22 00:08:30.049 GMT</span>
   ...( database engine messages not shown )...
<span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) shutdown 
 at 2006-09-22 00:16:44.223 GMT</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Though not demonstrated here,
multiple client programs can connect to Network Server and access the database
simultaneously in this configuration.</div></div></div></div><div><a name="N1098A"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="twwdactivity3_Setup"></a><span></span>Activity 3: Run a JDBC program using the Embedded driver</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">This activity loads the Derby database engine using a simple Java
JDBC program. JDBC is the Java Database Connectivity API and is also the native
API for Derby. The program uses the embedded driver to create (if needed)
and then connect to the <span style="font-family: Courier;">jdbcDemoDB</span> database. You can then
populate a table within the database with text. The program demonstrates some
basic JDBC processing along with related error handling.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N109B9"></a><span></span>This activity assumes that you have opened a command window, navigated
to the <span style="font-family: Courier;">DERBYDBS</span> directory, and set the <span style="font-style: italic;">DERBY_HOME</span> environment
variable.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N109CA"></a><span></span>The <span style="font-style: italic;">CLASSPATH</span> environment variable is used by
Java to locate the binary files (<span style="border-right-width: 0pt; border-left-width: 0pt;">jarfiles</span> and <span style="border-right-width: 0pt; border-left-width: 0pt;">classfiles</span>)
needed to run Derby and other Java applications. Before performing this activity,
you need to set the <span style="font-style: italic;">CLASSPATH</span> and compile the <span style="font-family: Courier;">WwdEmbedded.java</span> Java
program. </div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Copy the program files into the <span style="font-family: Courier;">DERBYDBS</span> directory
and set the <span style="font-style: italic;">CLASSPATH</span>:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">copy %DERBY_HOME%\demo\programs\workingwithderby\* .

set CLASSPATH=%DERBY_HOME%\lib\derby.jar;.</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">cp $DERBY_HOME/demo/programs/workingwithderby/* .

export CLASSPATH=$DERBY_HOME/lib/derby.jar:.</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">&gt;
        Important: </span>  Include the dot (<span style="font-weight: bold;">.</span>) at the end
of each command so that your current working directory is included in the <span style="font-style: italic;">CLASSPATH</span> and
the files are copied to the correct location.</div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Compile the <span style="font-family: Courier;">WwdEmbedded.java</span> program:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">javac WwdEmbedded.java</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">&gt;
        Important: </span>  Only a command prompt will be displayed
if the compilation is successful. The binary file <span style="font-family: Courier;">WwdEmbedded.class</span> will
be created. If an error is displayed please verify that the Java development
kit is properly installed.</div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Run the program:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">The <span style="font-family: Courier;">WwdEmbedded.java</span> program
populates a table with wish list items. It is a simple Java program that prompts
the User for text input (up to 32 characters), stores the text entered in
a database table and then lists the items stored in the table. The program
will continue to ask for wish list items until the word <span style="font-family: Courier;">exit</span> is
entered or a problem is encountered. Some basic information on program progress
is displayed at the beginning and the end of the program.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java WwdEmbedded</span>

<span style="font-style: italic;">org.apache.derby.jdbc.EmbeddedDriver loaded.
Connected to database jdbcDemoDB
 . . . . creating table WISH_LIST

Enter wish-list item (enter exit to end):</span>
<span style="font-weight: bold;">a peppermint stick</span>

<span style="font-style: italic;">  _________________________________________________________
On 2006-09-21 15:11:50.412 I wished for a peppermint stick
  ________________________________________________________

Enter wish-list item (enter exit to end):</span>
<span style="font-weight: bold;">an all expenses paid vacation</span>

<span style="font-style: italic;">  ________________________________________________________
On 2006-09-21 15:11:50.412 I wished for a peppermint stick
On 2006-09-21 15:12:47.024 I wished for an all expenses paid vacation
  ________________________________________________________

Enter wish-list item (enter exit to end):</span>
<span style="font-weight: bold;">exit</span>

<span style="font-style: italic;">Closed connection
Database shut down normally
Working With Derby JDBC program ending.</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr></table></div></div><div><a name="N10B0C"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="rwwdactivity3"></a><span></span>The WwdEmbedded program</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">This section describes the <span style="font-family: Courier;">WwdEmbedded.java</span> program,
highlighting details specific to accessing a Derby database from a JDBC program.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10B4F"></a><span></span>
Most of the code related to the database activities performed is included in this document
but you may find it helpful to open the program file and follow along in a
text viewer or editor. The <span style="font-style: italic;">SECTION NAMES</span> referred to in this
text can be found in the comments within the program code and serve as cross-reference
points between this document and the Java program. The program utilizes routines
from the <span style="font-family: Courier;">WwdUtils</span> class. The utility class code is not described
here but is available for review in the file <span style="font-family: Courier;">WwdUtils.java</span></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10B65"></a><span></span><div style="font-weight: bold;">Initialize the program</div><span style="font-style: italic;">INITIALIZATION SECTION</span>:
The initial lines of code identify the Java libraries used in the program,  
then set up the Java class <span style="font-family: Courier;">WwdEmbedded</span> and the <span style="font-family: Courier;">main</span> method
signature. Refer to a standard Java programming guide for information on these
program constructs.<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>import java.sql.*;
public class WwdEmbedded   
{
    public static void main(String[] args)
   {<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10B87"></a><span></span><div style="font-weight: bold;">Define key variables and Objects</div><span style="font-style: italic;">DEFINE VARIABLES
SECTION</span>: The initial lines of the <span style="font-family: Courier;">main</span> method define
the variables and Objects used in the program. This example uses variables
to store the information needed to connect to the Derby database. Using variables
for this information makes it easy to adapt the program to other configurations
and other databases.<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;">driver</span> - stores the name of the Derby embedded driver.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;">dbName</span> - stores the name of the database.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;">connectionURL</span> - stores the Derby connection URL that
will be used to access the database.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;">createString</span> - stores the SQL CREATE statement for
the <span style="font-style: italic;">WISH_LIST</span> table .</div></td></tr></table></div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>String driver = "org.apache.derby.jdbc.EmbeddedDriver";
String dbName="jdbcDemoDB";
String connectionURL = "jdbc:derby:" + dbName + ";create=true";
String createString = "CREATE TABLE WISH_LIST  "
        +  "(WISH_ID INT NOT NULL GENERATED ALWAYS AS IDENTITY " 
        ...
        +  " WISH_ITEM VARCHAR(32) NOT NULL) " ;<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10BD5"></a><span></span><div style="font-weight: bold;">Start the Derby engine</div><span style="font-style: italic;">LOAD DRIVER SECTION</span>:
Loading the Derby embedded JDBC driver starts the Derby database engine. The <span style="font-family: Courier;">try</span> and <span style="font-family: Courier;">catch</span> block
(the Java error handling construct) catches the exceptions that may occur.
A problem here is generally due to an incorrect CLASSPATH setting. <pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>String driver = "org.apache.derby.jdbc.EmbeddedDriver";
...
try{
    Class.forName(driver); 
} catch(java.lang.ClassNotFoundException e) {
...
}<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10BF7"></a><span></span><div style="font-weight: bold;">Boot the database</div><span style="font-style: italic;">BOOT DATABASE SECTION</span>:
The DriverManager class loads the database using the Derby connection URL
stored in the variable <span style="font-family: Courier;">connectionURL</span>. This URL includes the
parameter <span style="font-style: italic;">;create=true</span> so the database will be created
if it does not already exist. The primary <span style="font-family: Courier;">try</span> and <span style="font-family: Courier;">catch</span> 
block begins here. This construct handles errors for the database access code
.<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>String connectionURL = "jdbc:derby:" + dbName + ";create=true";
...
try {
    conn = DriverManager.getConnection(connectionURL);	
...  <span style="font-style: italic;">&lt;most of the program code is contained here&gt;</span>
}  catch (Throwable e)  {   
...
}<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10C2B"></a><span></span><div style="font-weight: bold;">Set up to execute SQL</div><span style="font-style: italic;">INITIAL SQL SECTION</span>:
Program objects needed to perform subsequent SQL operations are initialized
here and a check is made to see if the required data table exists.<div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">The statement
object <span style="font-family: Courier;">s</span> is initialized. If the utility method <span style="font-family: Courier;">WwdUtils.wwdChk4Table</span> does
not find the <span style="font-style: italic;">WISH_LIST</span> table it is created by executing
the SQL stored in the variable <span style="font-style: italic;">createString</span> via this statement
object. </div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>s = conn.createStatement();
if (! WwdUtils.wwdChk4Table(conn))
{  
   System.out.println (" . . . . creating table WISH_LIST");
   s.execute(createString);
}<div> &nbsp;&nbsp;&nbsp; </div></div></pre>The insert statement used to add data to the table is bound to
the prepared statement object <span style="font-family: Courier;">psInsert</span>. The prepared statement
uses the <span style="font-family: Courier;">?</span> parameter to represent the data that will be inserted
by the user. The actual value that is inserted is <span style="font-family: Courier;">set</span> later
in the code prior to executing the SQL. This is the most efficient way to
execute SQL statements that will be used multiple times.<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>psInsert = conn.prepareStatement
   ("insert into WISH_LIST(WISH_ITEM) values (?)");
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10C78"></a><span></span><div style="font-weight: bold;">Interact with the Database</div><span style="font-style: italic;">ADD / DISPLAY RECORD
SECTION</span>: This section uses the utility method <span style="font-family: Courier;">WwdUtils.getWishItem</span> to
gather information from the User. It then utilizes the objects set up previously
to insert the data into the <span style="font-style: italic;">WISH_LIST</span> table and then display
all records. A standard <span style="font-family: Courier;">do</span> loop causes the program to repeat
this series of steps until <span style="font-family: Courier;">exit</span> is entered.  The data
related activities performed in this section are:<div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">The <span style="font-family: Courier;">setString</span> method
sets the substitution parameter of the <span style="font-family: Courier;">psInsert</span> object to
the value entered by the User. Then <span style="font-family: Courier;">executeUpdate</span> is called
to perform the database insert.<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>psInsert.setString(1,answer);
psInsert.executeUpdate();  
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">The statement object <span style="font-family: Courier;">s</span> is used to select
all the records in the <span style="font-style: italic;">WISH_LIST</span> table and store them in
the ResultSet <span style="font-style: italic;">myWishes</span>.<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>myWishes = s.executeQuery("select ENTRY_DATE, WISH_ITEM 
               from WISH_LIST order by ENTRY_DATE");
<div> &nbsp;&nbsp;&nbsp; </div></div></pre>The <span style="font-family: Courier;">while</span> loop reads each record in turn by calling
the <span style="font-family: Courier;">next</span> method. The <span style="font-family: Courier;">getTimestamp</span> and <span style="font-family: Courier;">getString</span> methods
return specific fields in the record in the proper format. The fields are
displayed using rudimentary formatting.<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>while (myWishes.next())
{
    System.out.println("On " + myWishes.getTimestamp(1) +
       " I wished for " + myWishes.getString(2));
}<div> &nbsp;&nbsp;&nbsp; </div></div></pre>Close the ResultSet to release the memory being used.<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>myWishes.close();
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10D03"></a><span></span><div style="font-weight: bold;">Shutdown the Database</div><span style="font-style: italic;">DATABASE SHUTDOWN SECTION</span>:
When an application starts the Derby engine it should shutdown all databases
prior to exiting. The attribute <span style="font-family: Courier;">;shutdown=true</span> in the Derby
connection URL performs the shutdown. The shutdown process cleans up records
in the transaction log to ensure a faster startup the next time the database
is booted. <div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">This section verifies that the embedded driver is being used
then issues the shutdown command and catches the shutdown exception to confirm
the database shutdown cleanly. The shutdown status is displayed before the
program exits.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>if (driver.equals("org.apache.derby.jdbc.EmbeddedDriver")) {
   boolean gotSQLExc = false;
   try {
      DriverManager.getConnection("jdbc:derby:;shutdown=true");
   } catch (SQLException se)  {	
      if ( se.getSQLState().equals("XJ015") ) {		
         gotSQLExc = true;
      }
   }
   if (!gotSQLExc) {
   	  System.out.println("Database did not shut down normally");
   }  else  {
      System.out.println("Database shut down normally");	
   }
}<div> &nbsp;&nbsp;&nbsp; </div></div></pre><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">&gt;
        Important: </span>  The <span style="font-family: Courier;">XJ015</span> error is the
only exception thrown by Derby that signifies an operation succeeded. All
other exceptions indicate an operation failed.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10D30"></a><span></span><div style="font-weight: bold;">The errorPrint and SQLExceptionPrint methods</div><span style="font-style: italic;">DERBY
EXCEPTION REPORTING CLASSES</span>: The two methods at the end of the file, <span style="font-family: Courier;">errorPrint</span> and <span style="font-family: Courier;">SQLExceptionPrint</span>,
are generic exception reporting routines that can be used with any JDBC program.
This type of exception handling is required because often multiple exceptions
(<span style="font-family: Courier;">SQLException</span>) are chained together then thrown. A <span style="font-family: Courier;">while</span> loop
is used to report on each error in the chain. These classes are used by calling
the <span style="font-family: Courier;">errorPrint</span> method from the <span style="font-family: Courier;">catch</span> block
of the code that accesses the database. <pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>//  Beginning of the primary catch block: uses errorPrint method
}  catch (Throwable e)  {   
   /*    Catch all exceptions and pass them to 
   **       the exception reporting method   */ 
   System.out.println(" . . . exception thrown:");
   errorPrint(e);
}<div> &nbsp;&nbsp;&nbsp; </div></div></pre>The <span style="font-family: Courier;">errorPrint</span> routine prints a stack trace
for all exceptions except a <span style="font-family: Courier;">SQLException</span>. All SQLExceptions
are passed to the <span style="font-family: Courier;">SQLExceptionPrint</span> method.<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>static void errorPrint(Throwable e) {
   if (e instanceof SQLException) 
      SQLExceptionPrint((SQLException)e);
   else {
      System.out.println("A non SQL error occured.");
      e.printStackTrace();
   }   
}  // END errorPrint <div> &nbsp;&nbsp;&nbsp; </div></div></pre>The <span style="font-family: Courier;">SQLExceptionPrint</span> method
iterates through each of the exceptions on the stack. For each error the codes,
message then stacktrace are printed. <pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div>//  Iterates through a stack of SQLExceptions 
static void SQLExceptionPrint(SQLException sqle) {
   while (sqle != null) {
      System.out.println("\n---SQLException Caught---\n");
      System.out.println("SQLState:   " + (sqle).getSQLState());
      System.out.println("Severity: " + (sqle).getErrorCode());
      System.out.println("Message:  " + (sqle).getMessage()); 
      sqle.printStackTrace();  
      sqle = sqle.getNextException();
   }
}  //  END SQLExceptionPrint   <div> &nbsp;&nbsp;&nbsp; </div></div></pre>If you wish to see the output produced
by this method enter a wish list item with more than 32 characters like: <span style="font-family: Courier;">I
wish to see a Java program fail</span>.</div></div></div></div><div><a name="N10DB7"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="twwdactivity4"></a><span></span>Activity 4: Create and run a JDBC program using the Client driver and
Network Server</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">This section demonstrates the ease with which a program that embeds
Derby can be modified for a client/server implementation using the Derby
Network Server. A Derby client program, <span style="font-family: Courier;">WwdClient.java</span>, is
created by changing a few lines of the <span style="font-family: Courier;">WwdEmbedded.java</span> program.
The client program can be run in multiple command shells allowing simultaneous
update from two or more sources.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10DE7"></a><span></span>This activity assumes you have performed the preceding activities
and so have a working directory called <span style="font-family: Courier;">DERBYDBS</span>, are familiar
with setting the <span style="font-style: italic;">DERBY_HOME</span> and <span style="font-style: italic;">CLASSPATH</span> environment
variables and have copies of the program files from the <span style="font-style: italic;">$DERBY_HOME/demo/programs/workingwithderby/</span> directory.
A basic knowledge of the <span style="font-family: Courier;">WwdEmbedded.java</span> program and experience
starting and connecting to Network Server is helpful. You will need to use
a text editor to create the <span style="font-family: Courier;">WwdClient.java</span> program.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10E10"></a><span></span>Two command windows (<span style="font-family: Courier;">Server-Shell</span> and <span style="font-family: Courier;">Client-Shell</span>)
are used in this activity. The <span style="font-family: Courier;">Server-Shell</span> is used to start
the Derby Network Server and display Network Server messages. The <span style="font-family: Courier;">Client-Shell</span> is
used to edit, compile and run the newly created <span style="font-family: Courier;">WwdClient.java</span> program.
The <span style="font-style: italic;">CLASSPATH</span> environment variable is set in <span style="font-family: Courier;">Client-Shell</span> to
support the client JDBC program.</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-weight: bold;">Create the WwdClient program.</span></span><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>a.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Open a command window that we'll call the <span style="font-family: Courier;">Client-Shell</span>.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>b.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Change directory (<span style="font-family: Courier;">cd</span>) to the <span style="font-family: Courier;">DERBYDBS</span> directory.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>c.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Make a copy of the <span style="font-family: Courier;">WwdEmbedded.java</span> program called <span style="font-family: Courier;">WwdClient.java</span>.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 48pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">copy WwdEmbedded.java WwdClient.java</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 48pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">cp WwdEmbedded.java WwdClient.java</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>d.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Open the <span style="font-family: Courier;">WwdClient.java</span> file in your favorite
text editor and update the class name to reflect the new filename:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">Original declaration</span>
     public class WwdEmbedded

<span style="font-weight: bold;">New declaration</span>
     public class <span style="font-weight: bold;">WwdClient</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>e.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Edit the <span style="font-style: italic;">DEFINE VARIABLES SECTION</span> of the program so
the <span style="font-style: italic;">driver</span> variable contains the name of the Derby Client
Driver class and the <span style="font-style: italic;">connectionURL</span> variable contains the
hostname and a port number of the Network Server.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">Original definitions</span>
     String driver = "org.apache.derby.jdbc.EmbeddedDriver";
     String dbName="jdbcDemoDB";
     String connectionURL = "jdbc:derby:" + dbName + ";create=true";

<span style="font-weight: bold;">New definitions</span>
     String driver = <span style="font-weight: bold;">"org.apache.derby.jdbc.ClientDriver"</span>;
     ...
     String connectionURL = <span style="font-weight: bold;">"jdbc:derby://localhost:1527/"</span> + dbName + ";create=true";
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>f.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Compile the application.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">javac WwdClient.java</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">&gt;
        Important: </span>  Only a command prompt will be displayed
if the compilation is successful. The binary file <span style="font-family: Courier;">WwdClient.class</span> will
be created. If a syntax error is displayed, modify the line indicated so it
is identical to the example.</div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">That's all there is
to it.</div></div></div></td></tr></table></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-weight: bold;">Set up the client/server environment.</span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Before you run the <span style="font-family: Courier;">WwdClient</span> program, the Network 
Server needs to be started.</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>a.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Open a command window that we'll call the <span style="font-family: Courier;">Server-Shell</span>.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>b.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Change directory (<span style="font-family: Courier;">cd</span>) to the <span style="font-family: Courier;">DERBYDBS</span> directory.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>c.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Set the <span style="font-style: italic;">DERBY_HOME</span> environment variable.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>d.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Start the Network Server:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 48pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar %DERBY_HOME%\lib\derbynet.jar start</span>

<span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) started and
 ready to accept connections on port 1527 at 2006-09-22 
 00:56:33.091 GMT</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 48pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar $DERBY_HOME/lib/derbynet.jar start</span>

<span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) started and
 ready to accept connections on port 1527 at 2006-09-22 
 00:56:33.091 GMT</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div></div></div></td></tr></table></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-weight: bold;">Run the client program.</span></span><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>a.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Return to the <span style="font-family: Courier;">Client-Shell</span> window.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>b.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">If it is not already defined, set the <span style="font-style: italic;">DERBY_HOME</span> environment variable.
</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>c.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Set the <span style="font-style: italic;">CLASSPATH</span> environment variable to include
the location of the file <span style="font-family: Courier;">derbyclient.jar</span>:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 48pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">set CLASSPATH=%DERBY_HOME%\lib\derbyclient.jar;.</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 48pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">export CLASSPATH=$DERBY_HOME/lib/derbyclient.jar:.</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">&gt;
        Important: </span>  Include the dot (<span style="font-weight: bold;">.</span>) at the end
of the command so that your current working directory is included in the <span style="font-style: italic;">CLASSPATH</span>.</div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>d.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Run the program:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java WwdClient</span>

<span style="font-style: italic;">org.apache.derby.jdbc.ClientDriver loaded.
Connected to database jdbcDemoDB

Enter wish-list item (enter exit to end):</span>
<span style="font-weight: bold;">a sunny day</span>

<span style="font-style: italic;">  _________________________________________________________
On 2006-09-21 15:11:50.412 I wished for a peppermint stick
On 2006-09-21 15:12:47.024 I wished for an all expenses paid vacation
On 2006-09-22 10:08:21.167 I wished for a sunny day
  ________________________________________________________

Enter wish-list item (enter exit to end):</span>
<span style="font-weight: bold;">a new car</span>

<span style="font-style: italic;">  ________________________________________________________
On 2006-09-21 15:11:50.412 I wished for a peppermint stick
On 2006-09-21 15:12:47.024 I wished for an all expenses paid vacation
On 2006-09-22 10:08:21.167 I wished for a sunny day
On 2006-09-22 10:08:33.665 I wished for a new car
  ________________________________________________________

Enter wish-list item (enter exit to end):</span>
<span style="font-weight: bold;">exit</span>

<span style="font-style: italic;">Closed connection
Working With Derby JDBC program ending.</span><div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></td></tr></table></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>4. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-weight: bold;">Shut down the Network Server.</span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On Windows platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar %DERBY_HOME%\lib\derbynet.jar shutdown</span>

<span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) shutdown 
 at 2006-09-22 19:13:51.445 GMT</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">On UNIX Korn Shell platforms:</span></div><div style="margin-left: 72pt + 32pt;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><div> &nbsp;&nbsp;&nbsp; </div><span style="font-weight: bold;">java -jar $DERBY_HOME/lib/derbynet.jar shutdown</span>

<span style="font-style: italic;">Apache Derby Network Server - 10.2.1.6 - (452058) shutdown 
 at 2006-09-22 19:13:51.445 GMT</span>
<div> &nbsp;&nbsp;&nbsp; </div></div></pre></div></div></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">The server shutdown confirmation appears
in both command windows.</div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11137"></a><span></span><span style="font-weight: bold;">Activity notes</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">In a client/server environment, the client
program is often used from other computers on the network. Whenever a system
accepts connections from other computers, there is a chance of abuse. To maintain
security, the Derby Network Server defaults to accepting connections only from
clients running on the local machine (<span style="font-family: Courier;">localhost</span>). Before
this or any other Derby client program can access Network Server from another
machine, additional steps should be taken to secure the Network Server environment.
Once secured, the Network Server can be safely configured to accept connections
from other machines. Refer to the <span style="font-style: italic;">Network Server security</span> and <span style="font-style: italic;">Running
the Network Server under the security manager</span> sections of the <span style="font-style: italic;">Derby
Server and Administration Guide</span> for important information on securing
the Network Server and enabling network connections.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">With Network Server
started, you can run the client program simultaneously in multiple windows.
To demonstrate this, open two command windows and perform the substeps of the <span style="font-style: italic;">Run
the client program</span> step in each window. Both clients will operate
without a problem. In contrast, it would not be possible for a program that
uses the embedded driver (e.g. <span style="font-family: Courier;">WwdEmbedded</span>) to access the
database until the database or the Network Server is shut down. </div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">You
may have noticed that the client program does not shut down the database. This
is because the database is a shared resource in a client/server environment
and, in most cases, should only be shut down when the Server is shut down. If
multiple clients are accessing the database and one shuts down the database,
the remaining clients will encounter a failure the next time they attempt
an SQL command.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Derby's two architectures have caused confusion for
some new Derby users. They mistakenly think that embedded is a single user
configuration. This is not true. The embedded driver supports multiple simultaneous
connections, performs locking, and provides performance, integrity and recoverability.
Any application using the embedded driver can open multiple Derby connections
and then provide a means for multiple users to interact with the database
on each connection. The Derby Network Server is an example of such an application.</div></div></div></div><div><a name="N111A3"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="cwwdsummary"></a><span></span>What next with Derby</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Congratulations on completing the activities in this workbook.
You now have experience with using Derby in both the embedded and Client-Server 
architectures. With this basic knowledge you are ready to begin using
Derby to address your own specific needs. We recommend visiting the Apache
Derby website as your next step in learning about this lightweight and powerful
tool.</div><pre><div style="font-size: 12pt; margin-top: 0.8em; margin-bottom: 0.8em; border-top-color: black; border-top-width: thin; border-bottom-color: black; border-bottom-width: thin;">   <span style="font-weight: bold;">Use this link:</span>          <span style="color: blue;"><a href="http://wiki.apache.org/db-derby/WorkingWithDerby"><span style="font-weight: bold;">WorkingWithDerby Resources page</span></a></span>
   browser URL:       <span style="font-family: Courier;"><span style="font-weight: bold;">http://wiki.apache.org/db-derby/WorkingWithDerby</span></span></div></pre><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N111D7"></a><span></span><div style="font-weight: bold;">Activities Summary</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">We hope you have found these
activities useful in understanding the steps needed to create and access Derby
databases. Though simple to setup and use you will find that Derby has the
features and reliability of much larger database systems. The examples presented
here do not begin to scratch the surface of what can be done. Please take
a few moments to become familiar with the many online resources available
to Derby users and developers by browsing the Derby website at Apache. Whether
you are performing a general evaluation of Derby or have a specific need to
address, the above link is a good stepping stone to finding additional information
of interest. The <span style="color: blue;"><a href="http://db.apache.org/derby/quick_start.html">Derby Quick Start page</a></span> is a good reference page organized
by area of interest. You will find many content rich areas such as the <span style="font-style: italic;">Derby
Wiki</span> and the <span style="font-style: italic;">Derby Users mailing list</span> available to you.
If you are interested in how others are using Derby see the <span style="font-style: italic;">Uses of
Derby</span> page on the WIKI. This page contains informational links to development
projects and products that use Derby. When you implement a system using Derby
please add it to this list.</div></div></div></div></div></div><div valign="top"><div style="font-family: Helvetica; font-weight: bold; font-size: 10pt; text-align: center;"><span>&bull;</span></div></div><br></body></html>